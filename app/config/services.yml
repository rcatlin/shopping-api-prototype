# Learn more about services, parameters and containers at
# http://symfony.com/doc/current/book/service_container.html
parameters:
#    parameter_name: value

services:
    repository.product:
        class: AppBundle\Repository\ProductRepository
        factory: ["@doctrine", "getRepository"]
        arguments: ["AppBundle\\Entity\\Product"]

    repository.retailer:
        class: AppBundle\Repository\RetailerRepository
        factory: ["@doctrine", "getRepository"]
        arguments: ["AppBundle\\Entity\\Retailer"]

    # Properly handles deserialization of existing Doctrine Objects (PUT request)
    jms_serializer.object_constructor:
        alias: jms_serializer.doctrine_object_constructor

    jms_serializer.product_deserialization_subscriber:
        class: AppBundle\Serializer\Subscriber\ProductPreDeserializationSubscriber
        arguments: ['@logger']
        tags:
          - { name: jms_serializer.event_subscriber}
